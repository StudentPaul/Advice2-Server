function header(){return[m("#header",[m("i",{},"Advice"),m("a",{config:m.route,href:"/allQuestions"},"All questions"),m("a",{config:m.route,href:"/add"},"Add question"),m("a",{config:m.route,href:"/registration"},"Registration"),m("a",{config:m.route,href:"/login"},"Login"),m("a",{config:m.route,href:"/logout"},"Logout")]),m("hr")]}var addQuestion={},login={},main={},questions={};questions.vm=function(){var t={};return t.init=function(){t.list=null,t.answerList=null,t.listReady=!1,t.activeQuestion=m.prop(""),m.request({method:"GET",url:"/getAllQuestions"}).then(function(e){var n=JSON.parse(e);t.list=new Array(n)})},t}();var registration={};addQuestion.controller=function(){},login.controller=function(){},main.controller=function(){},questions.controller=function(){return questions.vm.init(),{answer:function(t){questions.vm.activeQuestion(t),this.fetchAnswers()},fetchAnswers:function(){m.request({method:"GET",url:"/getQuestionAnswers/"+questions.vm.activeQuestion()}).then(function(t){var e=JSON.parse(t);questions.vm.answerList=new Array(e)})},fetchMyQuestions:function(){m.request({method:"GET",url:"/getOwnQuestions"}).then(function(t){var e=JSON.parse(t);questions.vm.list=new Array(e)})},fetchAllQuestions:function(){m.request({method:"GET",url:"/getAllQuestions"}).then(function(t){var e=JSON.parse(t);questions.vm.list=new Array(e)})},isSelected:function(t){return t._id===questions.vm.activeQuestion()}}},registration.controller=function(){},addQuestion.view=function(){return[header(),m("form",{class:"form-signin",action:"/addQuestion",method:"POST"},[m("input",{type:"text",name:"title",class:"form-control",placeholder:"Question title",required:"true",autofocus:"true"}),m("input",{type:"text",name:"question",class:"form-control",placeholder:"Your question",required:"true"}),m("button",{class:"btn btn-lg btn-primary btn-block",type:"submit"},"Post question")])]},login.view=function(){return[header(),m("form",{class:"form-signin",action:"/login",method:"POST"},[m("input",{type:"text",name:"username",class:"form-control",placeholder:"Username",required:"true",autofocus:"true"}),m("input",{type:"password",name:"password",class:"form-control",placeholder:"Password",required:"true"}),m("button",{class:"btn btn-lg btn-primary btn-block",type:"submit"},"login")])]},main.view=function(){return[header(),m("div","welcome, my friend, to Advice family")]},questions.view=function(t){return[header(),m("button",{onclick:t.fetchMyQuestions.bind(t),class:"btn btn-lg btn-primary btn-block"},"Show only my questions"),m("button",{onclick:t.fetchAllQuestions.bind(t),class:"btn btn-lg btn-primary btn-block"},"Show all questions"),m("table",[questions.vm.list?questions.vm.list[0].map(function(e,n){return m("div",{class:"question-block",selected:t.isSelected(e)},m("tr",[m("h1",{},m("td",{},e.title)),m("td",{},e.question),m("button",{onclick:t.answer.bind(t,e._id),class:"btn btn-lg btn-primary btn-block"},"Select"),m("button",{onclick:function(){document.location="/deleteQuestion/"+e._id},class:"btn btn-lg btn-primary btn-block"},"Delete")]))}):m("div",{},"No questions found")]),m("form",{class:"form-signin",action:"/answerQuestion",method:"POST"},[m("input",{onchange:m.withAttr("value",questions.vm.activeQuestion),value:questions.vm.activeQuestion(),type:"text",name:"questionId",class:"form-control",placeholder:"Question ID",required:"true",autofocus:"true"}),m("input",{type:"text",name:"answer",class:"form-control",placeholder:"Answer",required:"true"}),m("button",{class:"btn btn-lg btn-primary btn-block",type:"submit"},"Answer")]),m("table",[questions.vm.answerList?questions.vm.answerList[0].map(function(t,e){return m("div",{class:"answer-block"},m("tr",[m("td",{},t.author),m("td",{},t.answer),m("td",{},t.date)]))}):[]])]},registration.view=function(){return[header(),m("form",{class:"form-signin",action:"/signup",method:"POST"},[m("input",{type:"text",name:"username",class:"form-control nomargin",placeholder:"Username",required:"true",autofocus:"true"}),m("br"),m("input",{type:"password",name:"password",class:"form-control nomargin",placeholder:"Password",required:"true"}),m("br"),m("input",{type:"email",name:"email",class:"form-control",placeholder:"Email",required:"true"}),m("br"),m("input",{type:"text",name:"firstName",class:"form-control",placeholder:"First Name",required:"true"}),m("br"),m("input",{type:"text",name:"lastName",class:"form-control",placeholder:"Last Name",required:"true"}),m("br"),m("button",{class:"btn btn-lg btn-primary btn-block",type:"submit"},"Register")])]},m.route.mode="hash",m.route(document.body,"/",{"/":main,"/login":login,"/registration":registration,"/add":addQuestion,"/allQuestions":questions});